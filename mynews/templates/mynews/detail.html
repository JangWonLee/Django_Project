{% extends "mynews/base.html" %} {% block title %}TP_NEWS{% endblock %}

{% block content %}


<div class="col-md-8 col-md-offset-1" ng-controller="DetailController as detailCtrl">
	<div>
		<div align="left">{{news.pub_date}}</div>
		
		{{news.id}}
		{{user}}
		
<!-- 		질문 더효율적인 방법은... -->
		{% if news.is_clipped_by_me %}
		<span ng-init="detailCtrl.pushpinState = 1"></span>
		{% else %}
		<span ng-init="detailCtrl.pushpinState = 0"></span>
		{% endif %}
		
		<span class="pushpin"><i ng-show="detailCtrl.isSetPushpinState(0)" ng-click="detailCtrl.setPushpinState(0, {{news.id}})" class="glyphicon glyphicon-pushpin float-right"></i></span>
		<span class="pushpin"><i ng-show="detailCtrl.isSetPushpinState(1)" ng-click="detailCtrl.setPushpinState(1, {{news.id}})" class="glyphicon glyphicon-pushpin float-right pushpin-red"></i></span>
		
		<br />
		<h1 class="news-title">{{news.title_text}}</h1>
		<h4 class="news-summary">{{news.summary_text}}</h3><br />
		<p class="news-opinion">{{news.opinion_text}}</p>
		<div class="news-link"><a href="{{news.link_text}}">{{ news.link_text }}</a></div>
	</div>
	
	{% if error_message %}
	<p>
		<strong>{{ error_message }}</strong>
	</p>
	{% endif %}
	
	<br />
	<br />
	<br />
	<p> {{comment_list_count}} Comments.</p>
	<hr>

	<div class="comment-load">
	{% if comment_list %}
		{% for comment in comment_list %}
		<div class="panel panel-default word-break" news_data="{{news.id}}" comment_data="{{comment.id}}">
			<div class="panel-body" style="margin-left: 10px; margin-right: 10px">
				<div>
					<img src=" {{ STATIC_URL }}picture/{{comment.publisher_text}}.jpg " width="50" height="50"> <span style="color: navy; font-weight: bold;">{{comment.publisher_text}}</span>
				</div>
				<div>
					<div class="comment-text">{{comment.comment_text|urlize|linebreaks}}</div>
				</div>
				<div style="font-size: x-small;">
					<span class="comment-pub-date">{{comment.pub_date}}</span>
					<span class="float-right" style="margin-left: 10px"><a class="comment-delete">Delete</a></span>
					<span class="float-right"><a class="comment-edit" style="font-size: ">Edit</a></span>
				</div>
			</div>
		</div>
		{% endfor %}
	{% endif %}
	</div>
	
<!-- 	<div ng-show="detailCtrl.postData.news_id" class="panel panel-default word-break" news_data="detailCtrl.postData.news_id" comment_data="{{comment.id}}"> -->
	<div ng-repeat="postData in detailCtrl.postDataArray" class="panel panel-default word-break">
		<div class="panel-body" style="margin-left: 10px; margin-right: 10px">
			<div>
				<img src=" {{ STATIC_URL }}picture/{$ postData.publisher_text $}.jpg " width="50" height="50"> <span style="color: navy; font-weight: bold;">{$ postData.publisher_text $}</span>
			</div>
			<br />
			<div>
				<textarea ng-show="detailCtrl.isSetCommentEditState(1)" class="form-control"  name="comment_text">{$ postData.comment_text $}</textarea>
				<div ng-show="detailCtrl.isSetCommentEditState(0)" class="comment-text">{$ postData.comment_text $}</div>
			</div>
			<div style="font-size: x-small;">
				<span class="comment-pub-date">{$ postData.pub_date $}</span>
				<span class="float-right" style="margin-left: 10px"><a ng-show="detailCtrl.isSetCommentEditState(0)" ng-click="detailCtrl.deleteComment( postData.news_id ,  postData.comment_id )" class="comment-delete">Delete</a></span>
				<span class="float-right"><a ng-show="detailCtrl.isSetCommentEditState(0)" ng-click="detailCtrl.setCommentEditState(0)" class="comment-edit" style="font-size: ">Edit</a></span>
				<span class="float-right"><a ng-show="detailCtrl.isSetCommentEditState(1)" ng-click="detailCtrl.setCommentEditState(1)" class="comment-submit">Submit</a></span>
			</div>
		</div>
	</div>	
	
	<div class="comment-post">
	<br />
		<form ng-submit="detailCtrl.postComment({{news.id}})">
			<textarea ng-model="detailCtrl.commentData.comment_text" class="form-control" placeholder="Comment" name="comment_text"></textarea>
			<button type="submit" class="btn btn-default" >Post Your Comment</button>
		</form>
	</div>
</div>
{% endblock %}

						
	