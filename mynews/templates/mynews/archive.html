{% extends "mynews/base.html" %} 
{% block title %}TP_PARTNERS{% endblock %}

{% block content %}
<script type="text/javascript">

// $(document).ready(function() {
	
// 	$('#btn-search').click(function() { 
// 		$this = $(this);
		
// 		alert($this.parents('.col-md-8').find('.form-control-search').val());
		
// 		$.ajax({ 
// 			url: "/mynews/news_search/",
// 			type: "post",
// 			data: {
// 				search_text: $this.parents('.col-md-8').find('.form-control-search').val(),
// 			},
// 			success: function(data) {
// 				console.log("success");
// 			},
// 		});
// 	});
// });

</script>

<div class="col-sm-1"></div>
<div class="col-md-8">
		<header>
			<h1>Archive</h1>
		</header><br />
		{% if archive_news %}
		<table cellspacing="0" cellpadding="0" class="table table-striped" >
			<thead>
				<tr>
					<th scope="col" style="width: 63%">Title</th>
					<th scope="col" style="width: 29%">Reg.date</th>
					<th scope="col" style="width: 8%">Comments</th>
				</tr>
			</thead>
			
			<tbody>
			<!-- 모든뉴스 -->
			{% for news in archive_news %}
				<tr>
					<td scope="row"><a href="{% url 'mynews:detail' news.id %}">{{ news.title_text }}</a></td>
					<td>{{news.pub_date}}</td>
					<td align="center">{{news.comment_count}}</td>
				</tr>
			{% endfor %}
			</tbody>
		</table>
		
		<!-- search form -->
		<div>
			<form method="post" action="{% url 'mynews:news_search' %}">
			{% csrf_token %}
			 	<span><input type="text" class="form-control-search" name="search-text" placeholder="">
				<button type="submit" id="btn-search" class="form-group btn btn-default">Search</button></span>
			</form>
		</div>
		<!-- 페이지네이션 -->
		<div class="pagination" align="center">
		    <span class="step-links">
		        {% if archive_news.has_previous %}
	            <a href="?page={{ archive_news.previous_page_number }}">previous</a>
		        {% endif %}
					
		        <span class="current">
		            Page {{ archive_news.number }} of {{ news.paginator.num_pages }}.
		        </span>
					
		        {% if archive_news.has_next %}
		            <a href="?page={{ archive_news.next_page_number }}">next</a>
		        {% endif %}
		    </span>
					
		</div>
	
		{% else %}
			<p>No News. Something wrong..</p>
		{% endif %}

</div>
{% endblock %}